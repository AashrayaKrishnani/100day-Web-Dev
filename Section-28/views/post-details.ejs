<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('includes/head', { title: post.title }) %>
    <link rel="stylesheet" href="/styles/forms.css" />
    <link rel="stylesheet" href="/styles/posts.css" />
    <script src="/scripts/comments.js" defer></script>
  </head>

  <body>
    <%- include('includes/header') %>
    <!--  -->
    <main id="post-detail">
      <%- include('includes/post-detail', {post: post, showSecondHr: true}) %>
      
      <hr class="light" />


      <section id="comments-form">
        <h2>Leave a comment</h2>
        <form data-post-id="<%=post._id%>">
          <div class="form-control">
            <label for="title">Comment title</label>
            <input type="text" id="title" name="title" required />
          </div>
          <div class="form-control">
            <label for="text">Your comment</label>
            <textarea name="text" id="text" rows="3" required></textarea>
          </div>
          <button class="btn">Save Comment</button>
        </form>
      </section>
      
      <section id="comments">
        <% if (!comments) { %>
        <p>This post might have comments. Click to try your luck! :)</p>
          <button id="load-comments-btn"  data-post-id ='<%= post._id%>' class="btn btn-alt">Load Comments</button>
        <% } else if (comments.length === 0) { %>
        <p>No comments found.</p>
        <% } %>
      </section>
      
    </main>
  </body>
</html>
